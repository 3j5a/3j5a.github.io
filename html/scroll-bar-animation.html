<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <title>3j5a</title>
    <link rel="icon" href="./../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="3j5a - java, javascript, julia">
    <meta property="og:type" content="random">

    <script>

        function letsScroll() {
            document.getElementById("container").innerHTML = "";

            const barWidth = document.getElementById("barWidh").value;
            const baseColor = 156;
            const scrollbarClassName = "scrollbar";
            const randRgb = () => Math.floor(Math.random() * baseColor) + 100;
            const getColor = () => `rgb(${randRgb()}, ${randRgb()}, ${randRgb()})`

            addScrollbars("container");

            let scrollbars = document.querySelectorAll(`.${scrollbarClassName}`)
            setInterval(function () {
                scrollbars.forEach(s => {
                    jitter = 30 * Math.random();
                    setTimeout(function () {
                        s.scrollTop = s.scrollTop + jitter * Math.random() - jitter / 2;
                    }, 100 + 900 * Math.random());
                });
            }, 1000);



            function generateScrollbar(height) {
                let scrollbar = document.createElement("div");
                scrollbar.className = scrollbarClassName;

                let color = getColor();
                let scrollbarStyle = scrollbar.style;
                scrollbarStyle.scrollbarColor = `${color} transparent`;
                scrollbarStyle.webkitScrollbar = "thin";
                scrollbarStyle.webkitScrollbarTrack = "transparent";
                scrollbarStyle.webkitScrollbarThumb = color;
                scrollbarStyle.webkitScrollbarBackgroundColor = color;

                scrollbarStyle.height = `${height}px`;
                scrollbarStyle.overflowY = "scroll";
                scrollbarStyle.width = `${barWidth}px`;

                let innerDiv = document.createElement("div");
                innerDiv.style.height = "200%";
                scrollbar.appendChild(innerDiv);

                return scrollbar;
            }

            function addScrollbars(containerId) {
                let scroobarsContainer = document.getElementById(containerId)
                let viewportWidth = window.innerWidth;
                let viewportHeight = window.innerHeight;
                let numberOfScrollbars = Math.floor(viewportWidth / barWidth);
                for (let i = 0; i < numberOfScrollbars; i++) {
                    let height = Math.floor(Math.random() * (viewportHeight - 120)) + 100;
                    let scrollbar = generateScrollbar(height);
                    scroobarsContainer.appendChild(scrollbar);
                    scrollbar.scrollTop = Math.floor(height * Math.random());
                }
            }

        }

    </script>

    <style>
        #container {
            display: flex;
            width: 100%;
        }
    </style>

</head>

<body>
    <div style="display: flex;">
        <input type="range" value="16" step="1"  min="1" max="16" list="scroll-width-values" id="barWidh">
        <button style="margin-left: 10px" onclick="letsScroll()">let's scroll</button>
    </div>
    <div id="container">
    </div>
</body>

</html>